<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
    <title>Geeklets-hs</title>
    <link rel="stylesheet" type="text/css" href="../css/default.css" />
    <link rel="stylesheet" type="text/css" href="../css/syntax.css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source Code Pro">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

<body>
    <div class="topnav">
        <ul class="horizontal">
            <li><a href="../index.html">Thomas Bidne</a></li>
            <li><a href="https://github.com/tbidne" target="_blank" title="GitHub"><i class="fa fa-github"></i></a></li>
            <li><a href="https://linkedin.com/in/tbidne" target="_blank" title="LinkedIn"><i class="fa fa-linkedin"></i></a></li>
            <li class="rightli"><a href="../contact.html">Contact</a></li>
            <li class="rightli"><a href="../archive.html">Archive</a></li>
            <li class="rightli"><a href="../projects.html">Projects</a></li>
            <li class="rightli"><a href="../TBidne_Resume.pdf">Resume</a></li>
            <li class="rightli"><a href="../about.html">About</a></li>
          </ul>
    </div>

    <div id="content">
        <h1>Geeklets-hs</h1>
        <p><span class="fa fa-github"></span> <a href="https://github.com/tbidne/geeklets-hs">Repo</a></p>
<p>This a Haskell reimplementation of a project I originally wrote in Ruby. It is extremely simple, just backing scripts for <a href="https://www.tynsoe.org/v2/geektool/">GeekTool</a> that I use on my desktop.</p>
<p>There are really only two notable elements of this project.</p>
<p>One, it was my first experience with the Freer monad. I have been interested in so-called “effect systems” and wanted to try something like <a href="https://hackage.haskell.org/package/polysemy">polysemy</a> or <a href="https://hackage.haskell.org/package/freer-simple">freer-simple</a>. However, I figured it would be prudent to understand <em>what</em> the freer monad is first, so I decided to write a dead-simple implementation of the concept from the <a href="http://okmij.org/ftp/Haskell/extensible/more.pdf">original paper</a> by Kiselyov and Ishii. I would not use it in a large project today as I’m too inexperienced with it to know its pain points, best practices, etc., but it is definitely interesting.</p>
<p>Second, I tried out the <a href="https://hackage.haskell.org/package/hedgehog">Hedgehog</a> property testing library. Like QuickCheck, Hedgehog is really cool. However, there are some areas where I think Hedeghog has the upper hand:</p>
<ul>
<li>Automatic shrinking. This is a huge win, in my opinion, even if it means the shrinking is sub-optimal.</li>
<li>No orphan instances! This is probably not that big of a deal, but I found it annoying that everything in QuickCheck has to be an instance of <code>Arbitrary</code>, leading either to orphan instances or <code>newtype</code>s everywhere.</li>
</ul>
<p>On the other hand, QuickCheck does have some advantages:</p>
<ul>
<li>The converse of my first bullet point above, you have to supply the shrinking functions yourself, but they can therefore be much faster.</li>
<li>Don’t have to write manual generators everywhere. Say you need a generator for a type <code>Foo</code>. For QuickCheck you write the <code>Arbitrary</code> instance, and once you do that you can use it anywhere in the signature of a property you want to test. E.g., you can write <code>Foo -&gt; Bool</code>, <code>Int -&gt; Foo -&gt; Bool</code> without any extra work. I’m not aware of how to do this in Hedgehog. To the best of my knowledge, you still have to write <code>genFoo :: Gen Foo</code> and <code>genIntFoo :: Gen (Int, Foo)</code> because <code>forAll</code> only takes a single <code>Gen</code>. It is very possible this is a gap in my Hedgehog knowledge, but as of now it’s annoying.</li>
</ul>
<p>I also tried out the testing framework <a href="https://hackage.haskell.org/package/tasty">tasty</a>. Tasty is awesome, and I imagine I’ll use it to organize the tests in most of my future projects.</p>
    </div>
    <div id="footer">
        Site proudly generated by
        <a href="http://jaspervdj.be/hakyll">Hakyll</a>
    </div>
</body>

<script>
    const rx = /.*\/(.*)\.html.*/;
    stripURI = uri => {
        const res = rx.exec(uri);
        if (res && res.length > 1) {
            return res[1];
        }
        return '';
    }

    let loc = stripURI(window.location.href);
    if (loc === '') {
        loc = 'index';
    }
    const elements = document.getElementsByTagName('li');
    for (let i = 0 ; i < elements.length ; i++) {
        const s = stripURI(elements[i].innerHTML);
        if (loc === s) {
            elements[i].classList.add('currentLink');
        }
    }
</script>

</html>